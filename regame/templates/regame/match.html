{% extends "regame/base.html" %}

{% block title %}
{% if player == match.current %}
[*]
{% endif %}
{{ competitor.userprofile.display_name }} vs {{ player.userprofile.display_name }} match
{% endblock %}

{% block head_tags %}
{% if reloading %}
<meta http-equiv="refresh" content="3" />
{% endif %}
{% endblock %}

{% block content %}

<p>
    {{ player.userprofile.display_name }} vs {{ competitor.userprofile.display_name }}.
</p>
<p>
    Current score: <strong>{{ playerscore }} : {{ competitorscore }}</strong>. {% if match.active %} {% include "regame/wincondition.html" %} {% endif %}
</p>

{% if match.active %}
<p> It's
 {% if user == match.current %}
     your
 {% else %}
    {{ match.current.userprofile.display_name }}'s
 {%  endif %}
    turn.</p>
{% else %}
<p>The match ended.</p>
{% endif %}

<form method="post" action="{{ actionurl }}" class="{% if player == match.current and match.active %}active{% endif %}">
{% if form.header %}
<h4>{{ form.header }}</h4>
{% endif %}
{% csrf_token %}
{{ form.action }}
<div>
<p>In hand:</p>
{% for cardpair in ownhandcards %}
<label class="cardslot">
{% include "regame/card.html" with card=cardpair.card.card only %}
<br/>
{{ cardpair.widget | default_if_none:"" }}
</label>
{% endfor %}
</div>

<div>
<p>On table:</p>
{% for cardpair in owntablecards %}
<label class="cardslot">
{% include "regame/card.html" with card=cardpair.card.card only %}
<br/>
{% if cardpair.card.card %}
{{ cardpair.widget | default_if_none:"" }}
{% endif %}
</label>
{% endfor %}
</div>

<div>
<p>On table, competitor's:</p>
{% for cardpair in competitortablecards %}
<label class="cardslot">
{% if cardpair.card.card %}
{{ cardpair.widget | default_if_none:"" }}
{% endif %}
<br/>
{% include "regame/card.html" with card=cardpair.card.card only %}
</label>
{% endfor %}
</div>

{{ form.non_field_errors }}

{%if actionurl %}
<input type="submit" value="{{ form.submittext | default_if_none:"Move" }}" />
{% endif %}

{% if yourremovedcard or competitorsremovedcard %}
<div>
<p>Recently removed cards:</p>
{% if yourremovedcard %}
<div class="cardslot">
Your:<br/>
{% include "regame/card.html" with card=yourremovedcard only %}
</div>
{% endif %}
{% if competitorsremovedcard %}
<div class="cardslot">
Competitor's:<br/>
{% include "regame/card.html" with card=competitorsremovedcard only %}
</div>
{% endif %}
</div>
{% endif %}

</form>

{{ movedesc }}

{% endblock %}
